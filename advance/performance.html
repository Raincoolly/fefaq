<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>性能 | 前端面试题</title>
    <meta name="description" content="前端面试题整理">
    
    
    <link rel="preload" href="/assets/css/0.styles.cf70ed5d.css" as="style"><link rel="preload" href="/assets/js/app.74915420.js" as="script"><link rel="preload" href="/assets/js/9.25a55017.js" as="script"><link rel="prefetch" href="/assets/js/10.bd34cbf4.js"><link rel="prefetch" href="/assets/js/11.a8add717.js"><link rel="prefetch" href="/assets/js/12.dcb5e2cc.js"><link rel="prefetch" href="/assets/js/13.bb04abb1.js"><link rel="prefetch" href="/assets/js/14.999a750d.js"><link rel="prefetch" href="/assets/js/15.ad569e8f.js"><link rel="prefetch" href="/assets/js/16.9f14f8ef.js"><link rel="prefetch" href="/assets/js/17.cc18f972.js"><link rel="prefetch" href="/assets/js/18.e0453436.js"><link rel="prefetch" href="/assets/js/19.ac6a465d.js"><link rel="prefetch" href="/assets/js/2.337978da.js"><link rel="prefetch" href="/assets/js/20.47e552fd.js"><link rel="prefetch" href="/assets/js/21.15aa9870.js"><link rel="prefetch" href="/assets/js/22.12d28b1e.js"><link rel="prefetch" href="/assets/js/23.764a7735.js"><link rel="prefetch" href="/assets/js/24.61d75d1e.js"><link rel="prefetch" href="/assets/js/25.fcf9e416.js"><link rel="prefetch" href="/assets/js/26.057a2669.js"><link rel="prefetch" href="/assets/js/27.5abe5d51.js"><link rel="prefetch" href="/assets/js/28.d4d2b6db.js"><link rel="prefetch" href="/assets/js/29.26b09816.js"><link rel="prefetch" href="/assets/js/3.49b8308b.js"><link rel="prefetch" href="/assets/js/30.5eaa96de.js"><link rel="prefetch" href="/assets/js/31.8eea43f5.js"><link rel="prefetch" href="/assets/js/32.937cb930.js"><link rel="prefetch" href="/assets/js/33.2a201b73.js"><link rel="prefetch" href="/assets/js/34.d182f7e1.js"><link rel="prefetch" href="/assets/js/35.a877cfe2.js"><link rel="prefetch" href="/assets/js/36.0545ea15.js"><link rel="prefetch" href="/assets/js/37.d181e290.js"><link rel="prefetch" href="/assets/js/38.9f053e65.js"><link rel="prefetch" href="/assets/js/39.d80e1b49.js"><link rel="prefetch" href="/assets/js/4.2a599544.js"><link rel="prefetch" href="/assets/js/40.7ffa14c5.js"><link rel="prefetch" href="/assets/js/41.01c34876.js"><link rel="prefetch" href="/assets/js/42.a4418982.js"><link rel="prefetch" href="/assets/js/43.6ac8a75c.js"><link rel="prefetch" href="/assets/js/44.b17e54ba.js"><link rel="prefetch" href="/assets/js/45.eefa8e85.js"><link rel="prefetch" href="/assets/js/46.fad0d18f.js"><link rel="prefetch" href="/assets/js/47.d74a0492.js"><link rel="prefetch" href="/assets/js/48.a984657f.js"><link rel="prefetch" href="/assets/js/49.c7725cd9.js"><link rel="prefetch" href="/assets/js/5.c811a82f.js"><link rel="prefetch" href="/assets/js/6.99710472.js"><link rel="prefetch" href="/assets/js/7.30f7f679.js"><link rel="prefetch" href="/assets/js/8.84b5e6e1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf70ed5d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端面试题</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/base/" class="nav-link">基础</a></div><div class="nav-item"><a href="/advance/" class="nav-link router-link-active">进阶</a></div><div class="nav-item"><a href="/arithmetic/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/node/" class="nav-link">node</a></div><div class="nav-item"><a href="/computed-base/" class="nav-link">常识</a></div><div class="nav-item"><a href="/simply/" class="nav-link">简版</a></div><div class="nav-item"><a href="/excellent/" class="nav-link">精华</a></div><div class="nav-item"><a href="/print/" class="nav-link">打印</a></div><div class="nav-item"><a href="https://shudong.wang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/wsdo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/wsdo/fefaq" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/base/" class="nav-link">基础</a></div><div class="nav-item"><a href="/advance/" class="nav-link router-link-active">进阶</a></div><div class="nav-item"><a href="/arithmetic/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/node/" class="nav-link">node</a></div><div class="nav-item"><a href="/computed-base/" class="nav-link">常识</a></div><div class="nav-item"><a href="/simply/" class="nav-link">简版</a></div><div class="nav-item"><a href="/excellent/" class="nav-link">精华</a></div><div class="nav-item"><a href="/print/" class="nav-link">打印</a></div><div class="nav-item"><a href="https://shudong.wang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/wsdo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/wsdo/fefaq" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/advance/" class="sidebar-link">第三部分：高级篇</a></li><li><a href="/advance/closure.html" class="sidebar-link">闭包</a></li><li><a href="/advance/depth-copy.html" class="sidebar-link">深浅拷贝</a></li><li><a href="/advance/this.html" class="sidebar-link">this</a></li><li><a href="/advance/browser.html" class="sidebar-link">浏览器</a></li><li><a href="/advance/closure.html" class="sidebar-link">闭包</a></li><li><a href="/advance/frame.html" class="sidebar-link">框架通识</a></li><li><a href="/advance/mvvm.html" class="sidebar-link">MVVM</a></li><li><a href="/advance/performance.html" class="active sidebar-link">性能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/advance/performance.html#性能" class="sidebar-link">性能</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h2 id="性能"><a href="#性能" aria-hidden="true" class="header-anchor">#</a> 性能</h2> <h3 id="_1-dns-预解析"><a href="#_1-dns-预解析" aria-hidden="true" class="header-anchor">#</a> 1 DNS 预解析</h3> <ul><li><code>DNS</code> 解析也是需要时间的，可以通过预解析的方式来预先获得域名所对应的 <code>IP</code></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>//shudong.wang<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-缓存"><a href="#_2-缓存" aria-hidden="true" class="header-anchor">#</a> 2 缓存</h3> <ul><li>缓存对于前端性能优化来说是个很重要的点，良好的缓存策略可以降低资源的重复加载提高网页的整体加载速度</li> <li>通常浏览器缓存策略分为两种：强缓存和协商缓存</li></ul> <p><strong>强缓存</strong></p> <blockquote><p>实现强缓存可以通过两种响应头实现：<code>Expires</code>和 <code>Cache-Control</code> 。强缓存表示在缓存期间不需要请求，<code>state code</code>为 <code>200</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>Expires: Wed, 22 Oct 2018 08:41:00 GMT
</code></pre></div><blockquote><p><code>Expires</code> 是 <code>HTTP / 1.0</code> 的产物，表示资源会在 <code>Wed, 22 Oct 2018 08:41:00 GMT</code> 后过期，需要再次请求。并且 <code>Expires</code> 受限于本地时间，如果修改了本地时间，可能会造成缓存失效</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>Cache-control: max-age=30
</code></pre></div><blockquote><p><code>Cache-Control</code> 出现于 <code>HTTP / 1.1</code>，优先级高于 <code>Expires</code> 。该属性表示资源会在 <code>30</code> 秒后过期，需要再次请求</p></blockquote> <p><strong>协商缓存</strong></p> <ul><li>如果缓存过期了，我们就可以使用协商缓存来解决问题。协商缓存需要请求，如果缓存有效会返回 304</li> <li>协商缓存需要客户端和服务端共同实现，和强缓存一样，也有两种实现方式</li></ul> <p><code>Last-Modified</code> 和 <code>If-Modified-Since</code></p> <ul><li><code>Last-Modified</code> 表示本地文件最后修改日期，<code>If-Modified-Since</code> 会将 <code>Last-Modified</code>的值发送给服务器，询问服务器在该日期后资源是否有更新，有更新的话就会将新的资源发送回来</li> <li>但是如果在本地打开缓存文件，就会造成 <code>Last-Modified</code> 被修改，所以在 <code>HTTP / 1.1</code> 出现了 <code>ETag</code></li></ul> <p><code>ETag</code> 和 <code>If-None-Match</code></p> <ul><li><code>ETag</code> 类似于文件指纹，<code>If-None-Match</code> 会将当前 <code>ETag</code> 发送给服务器，询问该资源 ETag 是否变动，有变动的话就将新的资源发送回来。并且 <code>ETag</code> 优先级比 <code>Last-Modified</code> 高</li></ul> <p><strong>选择合适的缓存策略</strong></p> <blockquote><p>对于大部分的场景都可以使用强缓存配合协商缓存解决，但是在一些特殊的地方可能需要选择特殊的缓存策略</p></blockquote> <ul><li>对于某些不需要缓存的资源，可以使用 <code>Cache-control: no-store</code> ，表示该资源不需要缓存</li> <li>对于频繁变动的资源，可以使用 <code>Cache-Control: no-cache</code> 并配合 <code>ETag</code> 使用，表示该资源已被缓存，但是每次都会发送请求询问资源是否更新。</li> <li>对于代码文件来说，通常使用 <code>Cache-Control: max-age=31536000</code> 并配合策略缓存使用，然后对文件进行指纹处理，一旦文件名变动就会立刻下载新的文件</li></ul> <h3 id="_3-使用-http-2-0"><a href="#_3-使用-http-2-0" aria-hidden="true" class="header-anchor">#</a> 3 使用 HTTP / 2.0</h3> <ul><li>因为浏览器会有并发请求限制，在 <code>HTTP / 1.1</code> 时代，每个请求都需要建立和断开，消耗了好几个 <code>RTT</code> 时间，并且由于 <code>TCP</code> 慢启动的原因，加载体积大的文件会需要更多的时间</li> <li>在 <code>HTTP / 2.0</code> 中引入了多路复用，能够让多个请求使用同一个 <code>TCP</code> 链接，极大的加快了网页的加载速度。并且还支持 <code>Header</code> 压缩，进一步的减少了请求的数据大小</li></ul> <h3 id="_4-预加载"><a href="#_4-预加载" aria-hidden="true" class="header-anchor">#</a> 4 预加载</h3> <ul><li>在开发中，可能会遇到这样的情况。有些资源不需要马上用到，但是希望尽早获取，这时候就可以使用预加载</li> <li>预加载其实是声明式的 <code>fetch</code> ，强制浏览器请求资源，并且不会阻塞 <code>onload</code> 事件，可以使用以下代码开启预加载</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://example.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>预加载可以一定程度上降低首屏的加载时间，因为可以将一些不影响首屏但重要的文件延后加载，唯一缺点就是兼容性不好</p></blockquote> <h3 id="_5-预渲染"><a href="#_5-预渲染" aria-hidden="true" class="header-anchor">#</a> 5 预渲染</h3> <blockquote><p>可以通过预渲染将下载的文件预先在后台渲染，可以使用以下代码开启预渲染</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prerender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://poetries.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>预渲染虽然可以提高页面的加载速度，但是要确保该页面百分百会被用户在之后打开，否则就白白浪费资源去渲染</li></ul> <h3 id="_6-懒执行与懒加载"><a href="#_6-懒执行与懒加载" aria-hidden="true" class="header-anchor">#</a> 6 懒执行与懒加载</h3> <p><strong>懒执行</strong></p> <ul><li>懒执行就是将某些逻辑延迟到使用时再计算。该技术可以用于首屏优化，对于某些耗时逻辑并不需要在首屏就使用的，就可以使用懒执行。懒执行需要唤醒，一般可以通过定时器或者事件的调用来唤醒</li></ul> <p><strong>懒加载</strong></p> <ul><li>懒加载就是将不关键的资源延后加载</li></ul> <blockquote><p>懒加载的原理就是只加载自定义区域（通常是可视区域，但也可以是即将进入可视区域）内需要加载的东西。对于图片来说，先设置图片标签的 <code>src</code> 属性为一张占位图，将真实的图片资源放入一个自定义属性中，当进入自定义区域时，就将自定义属性替换为 <code>src</code> 属性，这样图片就会去下载资源，实现了图片懒加载</p></blockquote> <ul><li>懒加载不仅可以用于图片，也可以使用在别的资源上。比如进入可视区域才开始播放视频等</li></ul> <h3 id="_7-文件优化"><a href="#_7-文件优化" aria-hidden="true" class="header-anchor">#</a> 7 文件优化</h3></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com//wsdo/fefaq/edit/master/advance/performance.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/11/2019, 4:31:25 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/advance/mvvm.html" class="prev">
          MVVM
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.74915420.js" defer></script><script src="/assets/js/9.25a55017.js" defer></script>
  </body>
</html>
